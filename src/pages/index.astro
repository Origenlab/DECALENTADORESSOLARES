---
import { getCollection, type CollectionEntry } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/sections/Hero.astro";
import Features from "../components/sections/Features.astro";
import ProductGrid from "../components/sections/ProductGrid.astro";
import Testimonials from "../components/sections/Testimonials.astro";
import CallToAction from "../components/sections/CallToAction.astro";

const products: CollectionEntry<"productos">[] = (await getCollection("productos")).sort(
  (a: CollectionEntry<"productos">, b: CollectionEntry<"productos">) => a.data.order - b.data.order
);
const featuredProducts = products
  .filter((item: CollectionEntry<"productos">) => item.data.featured)
  .slice(0, 3);

const homeSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: "De Calentadores Solares",
  url: "https://decalentadoressolares.com"
};
---

<BaseLayout
  title="Calentadores Solares en Mexico | Instalacion y Ahorro de Gas"
  description="Venta, instalacion y mantenimiento de calentadores solares para hogares y negocios. Diseno tecnico, equipos eficientes y soporte profesional."
  schema={homeSchema}
>
  <Hero />

  <section class="section-tight" aria-label="Indicadores de valor">
    <div class="stats-strip">
      <div class="stats-grid">
        <article class="stats-item">
          <strong>Residencial y comercial</strong>
          <p>Atendemos hogares, condominios, hoteles, gimnasios y negocios de servicios.</p>
        </article>
        <article class="stats-item">
          <strong>Implementacion integral</strong>
          <p>Diagnostico, venta, instalacion y mantenimiento preventivo en un mismo flujo.</p>
        </article>
        <article class="stats-item">
          <strong>Soporte continuo</strong>
          <p>Seguimiento tecnico para mantener eficiencia y reducir riesgos operativos.</p>
        </article>
      </div>
    </div>
  </section>

  <Features />
  <ProductGrid products={featuredProducts} />
  <Testimonials />
  <CallToAction />
</BaseLayout>
