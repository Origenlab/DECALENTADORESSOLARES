---
import { getCollection, type CollectionEntry } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/sections/Hero.astro";
import Features from "../components/sections/Features.astro";
import ProductGrid from "../components/sections/ProductGrid.astro";
import Testimonials from "../components/sections/Testimonials.astro";
import CallToAction from "../components/sections/CallToAction.astro";
import FAQSection from "../components/sections/FAQSection.astro";
import LeadCapture from "../components/sections/LeadCapture.astro";
import SEOContentBlock from "../components/sections/SEOContentBlock.astro";

const products: CollectionEntry<"productos">[] = (await getCollection("productos")).sort(
  (a: CollectionEntry<"productos">, b: CollectionEntry<"productos">) => a.data.order - b.data.order
);
const featuredProducts = products.filter((item: CollectionEntry<"productos">) => item.data.featured);

const services = [
  {
    title: "Instalacion profesional",
    description:
      "Proyecto llave en mano con montaje, pruebas y puesta en marcha para asegurar agua caliente estable.",
    href: "/servicios/instalacion-profesional"
  },
  {
    title: "Mantenimiento preventivo",
    description:
      "Plan de visitas para sostener eficiencia termica, prevenir fallas y prolongar la vida util del sistema.",
    href: "/servicios/mantenimiento-preventivo"
  },
  {
    title: "Asesoria tecnica",
    description:
      "Dimensionamiento y comparativa de opciones para evitar sobreinversion o capacidad insuficiente.",
    href: "/servicios/asesoria-tecnica"
  },
  {
    title: "Proyectos comerciales",
    description:
      "Implementacion para hoteles, gimnasios, restaurantes y procesos de alta demanda de agua caliente.",
    href: "/servicios/proyectos-comerciales"
  }
];

const faqItems = [
  {
    question: "Cuanto puedo ahorrar con un calentador solar?",
    answer:
      "En la mayoria de los casos residenciales el ahorro anual puede estar entre 60% y 80% del gasto de gas destinado a agua caliente, dependiendo de consumo, clima y calidad de instalacion."
  },
  {
    question: "Como se calcula la capacidad correcta?",
    answer:
      "Se considera numero de usuarios, regaderas simultaneas, horarios de uso y tipo de inmueble. Por eso recomendamos una evaluacion tecnica antes de comprar."
  },
  {
    question: "Que diferencia hay entre sistema presurizado y de tubos?",
    answer:
      "El sistema presurizado ofrece mejor comportamiento para demandas simultaneas y redes exigentes; el sistema de tubos suele ser una alternativa competitiva para proyectos residenciales estandar."
  },
  {
    question: "Incluyen instalacion y garantia?",
    answer:
      "Si. Nuestros proyectos incluyen instalacion profesional, puesta en marcha y garantia sobre mano de obra. La garantia del equipo depende de modelo y fabricante."
  },
  {
    question: "Atienden fuera de CDMX?",
    answer:
      "Si. Coordinamos proyectos en CDMX, Estado de Mexico, Queretaro, Puebla, Hidalgo, Morelos y otras zonas mediante agenda comercial y tecnica."
  },
  {
    question: "Que mantenimiento requiere el sistema?",
    answer:
      "Se recomienda mantenimiento cada 6 a 12 meses para limpieza, revision de conexiones, valvulas y estado general del sistema, evitando perdida de rendimiento."
  },
  {
    question: "En cuanto tiempo se instala?",
    answer:
      "Un proyecto residencial promedio suele instalarse en 1 dia, mientras que proyectos comerciales pueden requerir fases segun alcance y complejidad."
  },
  {
    question: "Puedo cotizar por WhatsApp?",
    answer:
      "Si. Puedes enviar datos de tu consumo y ciudad para recibir una propuesta inicial en menos de 24 horas."
  }
];

const homeSchema = [
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    name: "De Calentadores Solares",
    url: "https://decalentadoressolares.com"
  },
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    name: "De Calentadores Solares",
    url: "https://decalentadoressolares.com",
    telephone: "+52-55-1234-5678",
    areaServed: "MX",
    address: {
      "@type": "PostalAddress",
      addressLocality: "Ciudad de Mexico",
      addressRegion: "CDMX",
      addressCountry: "MX"
    }
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    mainEntity: faqItems.map((item) => ({
      "@type": "Question",
      name: item.question,
      acceptedAnswer: {
        "@type": "Answer",
        text: item.answer
      }
    }))
  }
];

const seoParagraphs = [
  "En De Calentadores Solares trabajamos con un enfoque de ingenieria comercial: primero entendemos tu patron de consumo de agua caliente, despues proponemos la capacidad correcta y finalmente ejecutamos instalacion con criterios tecnicos que reducen riesgos de bajo rendimiento. Esta metodologia evita los errores mas comunes del mercado, como vender equipos sobredimensionados o instalaciones sin puesta en marcha real.",
  "Nuestro servicio atiende tanto clientes residenciales como comerciales en Mexico. En casas y departamentos priorizamos equilibrio entre inversion y ahorro; en negocios como hoteles, gimnasios, restaurantes y desarrollos multifamiliares estructuramos soluciones escalables con mantenimiento programado. Si necesitas comparar opciones, revisa nuestra pagina de servicios y el catalogo de productos para identificar la configuracion mas conveniente.",
  "A nivel SEO y contenido util, nos enfocamos en resolver las preguntas reales de compra: cuanto cuesta un calentador solar instalado, cuantos litros necesito por numero de personas, que diferencia existe entre equipos de tubos y sistemas presurizados, y cada cuanto se debe dar mantenimiento. Por eso nuestro blog tecnico esta orientado a decision de compra y no solo a informacion superficial.",
  "Si buscas cotizar calentadores solares en CDMX, Estado de Mexico o zonas cercanas, puedes enviarnos tu informacion por WhatsApp y recibir una propuesta base con capacidad sugerida, rango de inversion y recomendaciones de instalacion. Tambien podemos auditar cotizaciones de terceros para validar si realmente cubren tu demanda diaria de agua caliente."
];
---

<BaseLayout
  title="Calentadores Solares en Mexico | Cotizacion, Instalacion y Mantenimiento"
  description="Calentadores solares residenciales y comerciales en Mexico. Cotiza instalacion profesional, mantenimiento y asesoria tecnica para ahorrar gas de forma real."
  schema={homeSchema}
>
  <Hero />

  <section class="section-tight" aria-labelledby="market-title">
    <header class="section-header">
      <span class="section-eyebrow">Para quien trabajamos</span>
      <h2 id="market-title">Soluciones por tipo de proyecto</h2>
      <p class="section-description">
        Disenamos propuestas diferentes para cada necesidad: hogar, condominio y negocio con alta
        demanda de agua caliente.
      </p>
    </header>

    <div class="market-grid">
      <article class="market-card">
        <p class="mini-title">Residencial</p>
        <h3>Casas y departamentos</h3>
        <p>
          Configuraciones de 150 a 300 litros para 2 a 8 usuarios con enfoque en ahorro y retorno
          de inversion en corto plazo.
        </p>
      </article>
      <article class="market-card">
        <p class="mini-title">Condominios</p>
        <h3>Demanda compartida</h3>
        <p>
          Esquemas centralizados o por unidad para mejorar cobertura y reducir costos de operacion
          colectiva.
        </p>
      </article>
      <article class="market-card">
        <p class="mini-title">Comercial</p>
        <h3>Hoteles, gimnasios y restaurantes</h3>
        <p>
          Proyectos de mayor capacidad con estrategia de continuidad operativa y plan de
          mantenimiento para alta exigencia.
        </p>
      </article>
    </div>
  </section>

  <Features />

  <section class="section" aria-labelledby="capacity-title">
    <header class="section-header">
      <span class="section-eyebrow">Guia de compra</span>
      <h2 id="capacity-title">Capacidad sugerida por numero de personas</h2>
      <p class="section-description">
        Esta tabla es orientativa. La recomendacion final se valida con diagnostico tecnico para no
        sobredimensionar ni quedarte corto en cobertura.
      </p>
    </header>

    <div class="capacity-table-wrap">
      <table class="capacity-table">
        <thead>
          <tr>
            <th>Usuarios</th>
            <th>Capacidad sugerida</th>
            <th>Tipo de uso</th>
            <th>Rango de inversion estimado</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2 a 3 personas</td>
            <td>120 a 150 litros</td>
            <td>Departamento o casa pequena</td>
            <td>$14,000 a $20,000 MXN</td>
          </tr>
          <tr>
            <td>4 a 5 personas</td>
            <td>180 a 220 litros</td>
            <td>Casa familiar media</td>
            <td>$18,000 a $29,000 MXN</td>
          </tr>
          <tr>
            <td>6 a 8 personas</td>
            <td>250 a 320 litros</td>
            <td>Casa grande o multifamiliar</td>
            <td>$27,000 a $42,000 MXN</td>
          </tr>
          <tr>
            <td>Alta demanda</td>
            <td>Proyecto especial</td>
            <td>Comercial o procesos continuos</td>
            <td>Cotizacion por ingenieria</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <ProductGrid products={featuredProducts} title="Modelos mas consultados" />

  <section class="section" aria-labelledby="offers-title">
    <header class="section-header">
      <span class="section-eyebrow">Servicios</span>
      <h2 id="offers-title">Como vendemos y ejecutamos el proyecto</h2>
      <p class="section-description">
        Siguiendo las mejores practicas de la competencia lider, estructuramos una venta consultiva
        con etapas claras y conversion directa por WhatsApp.
      </p>
    </header>

    <div class="offer-grid">
      {services.map((service) => (
        <article class="offer-card">
          <h3>{service.title}</h3>
          <p>{service.description}</p>
          <a class="btn btn-outline" href={service.href}>Ver detalle</a>
        </article>
      ))}
    </div>
  </section>

  <section class="section" aria-labelledby="comparison-title">
    <header class="section-header">
      <span class="section-eyebrow">Diferenciador</span>
      <h2 id="comparison-title">Diferencia entre compra comun y proyecto profesional</h2>
    </header>

    <div class="comparison-grid">
      <article class="comparison-card comparison-card--bad">
        <h3>Compra basada solo en precio</h3>
        <ul class="features-list">
          <li>Capacidad sugerida sin analisis real de consumo.</li>
          <li>Instalacion rapida sin pruebas completas.</li>
          <li>Sin plan de mantenimiento ni seguimiento.</li>
          <li>Mayor riesgo de inconformidad y bajo rendimiento.</li>
        </ul>
      </article>

      <article class="comparison-card comparison-card--good">
        <h3>Proyecto con asesoria tecnica</h3>
        <ul class="features-list">
          <li>Dimensionamiento por usuarios y habitos de consumo.</li>
          <li>Instalacion profesional con puesta en marcha documentada.</li>
          <li>Mantenimiento preventivo programado.</li>
          <li>Soporte postventa y optimizacion continua.</li>
        </ul>
      </article>
    </div>
  </section>

  <section class="section" aria-labelledby="coverage-title">
    <header class="section-header">
      <span class="section-eyebrow">Cobertura y confianza</span>
      <h2 id="coverage-title">Zonas de atencion y soporte tecnico</h2>
    </header>

    <div class="coverage-grid">
      <article class="coverage-card">
        <h3>Cobertura principal</h3>
        <ul class="coverage-list">
          <li>Ciudad de Mexico</li>
          <li>Estado de Mexico</li>
          <li>Queretaro</li>
          <li>Puebla</li>
          <li>Hidalgo</li>
          <li>Morelos</li>
        </ul>
      </article>
      <article class="coverage-card">
        <h3>Compromiso comercial</h3>
        <p class="coverage-note">
          Te respondemos en menos de 24 horas con una ruta clara: diagnostico, propuesta, instalacion
          y mantenimiento.
        </p>
        <a class="btn btn-primary" href="/servicios">Conocer proceso completo</a>
      </article>
    </div>
  </section>

  <Testimonials />

  <FAQSection
    id="faq-home"
    title="Preguntas frecuentes antes de cotizar"
    subtitle="Estas preguntas concentran las principales dudas de compra detectadas en el mercado de calentadores solares."
    faqs={faqItems}
  />

  <SEOContentBlock
    title="Calentadores solares en Mexico: contenido comercial y tecnico para decidir mejor"
    paragraphs={seoParagraphs}
  />

  <LeadCapture source="home" />
  <CallToAction />
</BaseLayout>
